{"ast":null,"code":"import fs from \"fs\";\nexport default ((req, res) => {\n  if (req.method === \"GET\") {\n    try {\n      const todosBuffer = fs.readFileSync(\"data/todos.json\");\n      const todoString = todosBuffer.toString();\n\n      if (!todoString) {\n        res.statusCode = 200;\n        res.send([]);\n      }\n\n      const todos = JSON.parse(todoString);\n      res.statusCode = 200;\n      return res.send(todos);\n    } catch (e) {\n      console.log(e);\n      res.statusCode = 500;\n      res.send(e);\n    }\n  }\n});","map":{"version":3,"sources":["/Users/mac/Desktop/Nodejs/nextjs/ch3/next-todo/pages/api/todos.ts"],"names":["fs","req","res","method","todosBuffer","readFileSync","todoString","toString","statusCode","send","todos","JSON","parse","e","console","log"],"mappings":"AACA,OAAOA,EAAP,MAAe,IAAf;AAGA,gBAAe,CAACC,GAAD,EAAsBC,GAAtB,KAA+C;AAC1D,MAAGD,GAAG,CAACE,MAAJ,KAAe,KAAlB,EAAyB;AACrB,QAAI;AACA,YAAMC,WAAW,GAAGJ,EAAE,CAACK,YAAH,CAAgB,iBAAhB,CAApB;AACA,YAAMC,UAAU,GAAGF,WAAW,CAACG,QAAZ,EAAnB;;AACA,UAAG,CAACD,UAAJ,EAAgB;AACZJ,QAAAA,GAAG,CAACM,UAAJ,GAAiB,GAAjB;AACAN,QAAAA,GAAG,CAACO,IAAJ,CAAS,EAAT;AACH;;AACD,YAAMC,KAAkB,GAAGC,IAAI,CAACC,KAAL,CAAWN,UAAX,CAA3B;AACAJ,MAAAA,GAAG,CAACM,UAAJ,GAAiB,GAAjB;AACA,aAAON,GAAG,CAACO,IAAJ,CAASC,KAAT,CAAP;AACH,KAVD,CAUE,OAAOG,CAAP,EAAU;AACRC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACAX,MAAAA,GAAG,CAACM,UAAJ,GAAiB,GAAjB;AACAN,MAAAA,GAAG,CAACO,IAAJ,CAASI,CAAT;AACH;AACJ;AACJ,CAlBD","sourcesContent":["import { NextApiRequest, NextApiResponse } from \"next\";\nimport fs from \"fs\";\nimport { TodoTypes } from \"../../types/todo\";\n\nexport default (req: NextApiRequest, res: NextApiResponse) => {\n    if(req.method === \"GET\") {\n        try {\n            const todosBuffer = fs.readFileSync(\"data/todos.json\");\n            const todoString = todosBuffer.toString();\n            if(!todoString) {\n                res.statusCode = 200;\n                res.send([]);\n            }\n            const todos: TodoTypes[] = JSON.parse(todoString);\n            res.statusCode = 200;\n            return res.send(todos);\n        } catch (e) {\n            console.log(e);\n            res.statusCode = 500;\n            res.send(e);\n        }\n    }\n};"]},"metadata":{},"sourceType":"module"}